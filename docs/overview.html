<!DOCTYPE html SYSTEM "about:legacy-compat"><html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex">  <meta name="built-on" content="2023-01-25T19:57:45.269115828"/><meta name="build-number" content="448"/>    <meta name="keywords" content="">   <script> (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&amp;l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-5P98'); </script><script src="https://resources.jetbrains.com/storage/help-app/v5/analytics.js"></script>  <title>Overview | Dataframe Documentation</title><script id="virtual-toc-data" type="application/json">[{"id":"what-is-data-frame","level":0,"title":"What is Data Frame","anchor":"#what-is-data-frame"},{"id":"main-features-and-concepts","level":0,"title":"Main Features and Concepts","anchor":"#main-features-and-concepts"},{"id":"syntax","level":0,"title":"Syntax","anchor":"#syntax"}]</script>   <link href="https://resources.jetbrains.com/storage/help-app/v5/app.css" rel="stylesheet"/>   <link rel="icon" href="https://resources.jetbrains.com/storage/products/jetbrains/img/icons/favicon.ico" sizes="any"/><!-- 32×32 --><link rel="icon" href="https://resources.jetbrains.com/storage/products/jetbrains/img/icons/icon.svg" type="image/svg+xml"/><link rel="apple-touch-icon" href="https://resources.jetbrains.com/storage/products/jetbrains/img/icons/apple-touch-icon.png"/><!-- 180×180 --><link rel="manifest" href="https://www.jetbrains.com/site.webmanifest"/><meta name="apple-mobile-web-app-title" content="JetBrains"/><meta name="application-name" content="JetBrains"/><meta name="msapplication-TileColor" content="#000000"/><meta name="theme-color" content="#000000"/>  <meta name="image" content=""/><!-- Open Graph --><meta property="og:title" content="Overview | Dataframe"/><meta property="og:description" content=""/><meta property="og:image" content=""/><meta property="og:site_name" content="Dataframe Help"/><meta property="og:type" content="website"/><meta property="og:locale" content="en_US"/><meta property="og:url" content="https://kotlin.github.io/dataframe/0.9/overview.html"/><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content=""/><meta name="twitter:title" content="Overview | Dataframe"/><meta name="twitter:description" content=""/><meta name="twitter:creator" content=""/><meta name="twitter:image:src" content=""/><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json"> { "@context": "http://schema.org", "@type": "WebPage", "@id": "https://kotlin.github.io/dataframe/0.9/overview.html#webpage", "url": "https://kotlin.github.io/dataframe/0.9/overview.html", "name": "Overview | Dataframe", "description": "", "image": "", "inLanguage":"en-US" }</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json"> { "@type": "WebSite", "@id": "https://kotlin.github.io/dataframe/#website", "url": "https://kotlin.github.io/dataframe/", "name": "Dataframe Help" }</script><!-- End Schema.org --></head>    <body data-id="overview" data-main-title="Overview" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}"  data-template="article"  data-breadcrumbs=""  >  <div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Dataframe 0.9 Help</h3><div class="shortcuts-switcher"><label for="switch-shortcuts">Keymap:</label><select class="select _shortcuts" height="1" id="switch-shortcuts">  </select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="overview" id="overview.md"  >Overview</h1><aside data-type="tip" class="prompt" data-title="" id="d0d7e555" ><p id="510281fa" >This documentation is written in such a way that it could be read sequentially and in this case, it provides all necessary information about the library, but at the same time the <a href="operations.html" id="cd09cc5e"   >Operations</a> section could be used as an API reference</p></aside><section class="chapter"  ><h2 id="what-is-data-frame" data-toc="what-is-data-frame"  >What is Data Frame</h2><p id="80d0732f" >Data frame is an abstraction for working with structured data. Essentially it’s a 2-dimensional table with labeled columns of potentially different types. You can think of it like a spreadsheet or SQL table, or a dictionary of series objects.</p><p id="fe3524ae" >The handiness of this abstraction is not in the table itself but in a set of operations defined on it. <code class="code "   >Kotlin Dataframe</code> library is an idiomatic Kotlin DSL defining such operations. The process of working with data frame is often called <em id="e2a8d7d6" class=""  >data wrangling</em> which is the process of transforming and mapping data from one &quot;raw&quot; data form into another format that is more appropriate for analytics and visualization. The goal of data wrangling is to assure quality and useful data.</p></section><section class="chapter"  ><h2 id="main-features-and-concepts" data-toc="main-features-and-concepts"  >Main Features and Concepts</h2><ul class="list _bullet" id="c281afc5"    ><li class="list__item" id="e04dd602" ><p id="3b191856" ><a href="hierarchical.html" id="8d814764"   >Hierarchical</a> — <code class="code "   >Kotlin Dataframe</code> is able to read and present data from different sources including not only plain <b id="1bd1003" class=""  >CSV</b> but also <b id="20ba4411" class=""  >JSON</b>. That’s why it has been designed hierarchical and allows nesting of columns and cells.</p></li><li class="list__item" id="8177e751" ><p id="a0b0556a" ><a href="collectionsinterop.html" id="7ef6e730"   >Interoperable</a> — hierarchical data layout also opens a possibility of converting any objects structure in application memory to a data frame and vice versa.</p></li><li class="list__item" id="74d98e21" ><p id="1f338257" ><b id="ddc05d90" class=""  >Safe</b>—<code class="code "   >Kotlin Dataframe</code> provides a mechanism of on-the-fly <a href="extensionpropertiesapi.html" id="2ba5b756"   >generation of extension properties</a> that correspond to the columns of frame. In interactive notebooks like Jupyter or Datalore, the generation runs after each cell execution. In IntelliJ IDEA there's a Gradle plugin for generation properties based on CSV and Json. Also, we’re working on a compiler plugin that infers and transforms data frame schema while typing. <br/> The generated properties ensures you’ll never misspell column name and don’t mess up with its type, and of course nullability is also preserved.</p></li><li class="list__item" id="a390e058" ><p id="3d96f489" ><b id="4198c388" class=""  >Generic</b> — columns can store objects of any type, not only numbers or strings.</p></li><li class="list__item" id="87563b3f" ><p id="41f35529" ><a href="schemas.html" id="a03d3567"   >Polymorphic</a> — if all columns of dataframe are presented in some other dataframe, then the first one could be a superclass for latter. Thus, one can define a function on an interface with some set of columns and then execute it in a safe way on any dataframe which contains this set of columns.</p></li><li class="list__item" id="e3b21ca7" ><p id="4b9fab41" ><b id="2fe51041" class=""  >Immutable</b> — all operations on <code class="code "   >DataFrame</code> produce new instance, while underlying data is reused wherever it's possible</p></li></ul></section><section class="chapter"  ><h2 id="syntax" data-toc="syntax"  >Syntax</h2><p id="1c75310" ><b id="b6c4fde6" class=""  >Basics:</b></p><div class="code-block" data-lang="kotlin"      data-anchors="[65b16d31]"     >val df = DataFrame.read(&quot;titanic.csv&quot;, delimiter = ';')
</div><div class="code-block" data-lang="kotlin"      data-anchors="[5906ed32]"     >// filter rows
df.filter { survived &amp;&amp; home.endsWith(&quot;NY&quot;) &amp;&amp; age in 10..20 }
    
// add column
df.add(&quot;birthYear&quot;) { 1912 - age }

// sort rows
df.sortByDesc { age }

// aggregate data
df.groupBy { pclass }.aggregate {
    maxBy { age }.name into &quot;oldest person&quot;
    count { survived } into &quot;survived&quot;
}
</div><p id="17b00f22" ><b id="64664c6c" class=""  >Create:</b></p><div class="code-block" data-lang="kotlin"      data-anchors="[3ee7ac8c]"     >// create columns
val fromTo by columnOf(&quot;LoNDon_paris&quot;, &quot;MAdrid_miLAN&quot;, &quot;londON_StockhOlm&quot;, &quot;Budapest_PaRis&quot;, &quot;Brussels_londOn&quot;)
val flightNumber by columnOf(10045.0, Double.NaN, 10065.0, Double.NaN, 10085.0)
val recentDelays by columnOf(&quot;23,47&quot;, null, &quot;24, 43, 87&quot;, &quot;13&quot;, &quot;67, 32&quot;)
val airline by columnOf(&quot;KLM(!)&quot;, &quot;{Air France} (12)&quot;, &quot;(British Airways. )&quot;, &quot;12. Air France&quot;, &quot;'Swiss Air'&quot;)

// create dataframe
val df = dataFrameOf(fromTo, flightNumber, recentDelays, airline)
</div><p id="21b26e9a" ><b id="29470811" class=""  >Clean:</b></p><div class="code-block" data-lang="kotlin"      data-anchors="[72db985c]"     >// typed accessors for columns
// that will appear during 
// dataframe transformation
val origin by column&lt;String&gt;()
val destination by column&lt;String&gt;()

val dfClean = df
    // fill missing flight numbers
    .fillNA { flightNumber }.with { prev()!!.flightNumber + 10 }

    // convert flight numbers to int
    .convert { flightNumber }.toInt()

    // clean 'Airline' column
    .update { airline }.with { &quot;([a-zA-Z\\s]+)&quot;.toRegex().find(it)?.value ?: &quot;&quot; }

    // split 'From_To' column into 'From' and 'To'
    .split { fromTo }.by(&quot;_&quot;).into(origin, destination)

    // clean 'From' and 'To' columns
    .update { origin and destination }.with { it.lowercase().replaceFirstChar(Char::uppercase) }

    // split lists of delays in 'RecentDelays' into separate columns 
    // 'delay1', 'delay2'... and nest them inside original column `RecentDelays`
    .split { recentDelays }.inward { &quot;delay$it&quot; }

    // convert string values in `delay1`, `delay2` into ints
    .parse { recentDelays }
</div><p id="7fe478db" ><b id="a7c69b07" class=""  >Aggregate:</b></p><div class="code-block" data-lang="kotlin"      data-anchors="[d28313f9]"     >// group by flight origin
dfClean.groupBy { From into &quot;origin&quot; }.aggregate {
    // we are in the context of single data group
    
    // number of flights from origin
    count() into &quot;count&quot;
    
    // list of flight numbers
    flightNumber into &quot;flight numbers&quot;
    
    // counts of flights per airline
    airline.valueCounts() into &quot;airlines&quot;

    // max delay across all delays in `delay1` and `delay2`
    recentDelays.maxOrNull { delay1 and delay2 } into &quot;major delay&quot;

    // separate lists of recent delays for `delay1`, `delay2` and `delay3`
    recentDelays.implode(dropNulls = true) into &quot;recent delays&quot;
    
    // total delay per city of destination
    pivot { To }.sum { recentDelays.intCols() } into &quot;total delays to&quot;
}
</div></section><div class="last-modified"> Last modified: 25 January 2023</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom">   <a class="navigation-links__prev" href="gettingstarted.html">Getting started</a>   <a class="navigation-links__next" href="apilevels.html">Access APIs</a>   </div></article>  </div></section></main></div>  <script src="https://resources.jetbrains.com/storage/help-app/v5/app.js"></script>  </body></html>